"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Filter {
    constructor(apiName) {
        this.apiName = apiName;
    }
    filter(object) {
        const value = this.getValue(object, this.apiName);
        return this.apply(value);
    }
    static filter(objects, filter) {
        return objects.filter((obj) => filter.filter(obj));
    }
    getValue(object, apiName) {
        if (!apiName) {
            return undefined;
        }
        if (typeof object !== 'object') {
            return undefined;
        }
        // support regular APINames & dot anotation
        if (apiName in object) {
            return object[apiName];
        }
        // support nested object & arrays
        apiName = apiName.replace(/\[(\w+)\]/g, '.$1'); // convert indexes to properties
        const arr = apiName.split('.');
        return this.getValue(object[arr[0]], arr.slice(1).join('.'));
    }
}
exports.default = Filter;
